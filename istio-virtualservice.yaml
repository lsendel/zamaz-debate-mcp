
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: mcp-gateway-virtualservice
  namespace: default # Or your application namespace
spec:
  hosts:
    - "*"
  gateways:
    - mcp-gateway
  http:
    - match:
        - uri:
            prefix: /
      route:
        - destination:
            host: mcp-gateway.default.svc.cluster.local # Replace with your actual service name and namespace
            port:
              number: 8080 # Replace with your actual service port
      retries:
        attempts: 3
        perTryTimeout: 2s
        retryOn: 5xx,gateway-error,connect-failure
      timeout: 10s
